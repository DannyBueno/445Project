<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Contact Management</title>
    
</head>
<body>

    <div id="myDIV" class="container">
        <h2> Contact Management 
                <a class='button1' id = 'index-butn' href="index.html">Index</a>
                    <a class='button1' id = 'index-butn' href="contactpage.html">New</a>
        </h2>
    
    </div>

<div class="new-contact">
    New Contact
</div>

<div id="error"></div> 

    <form action="detailspage.html" method="GET" class="contact-form">

        <div class="div-inform">
            <label for="name"> Name: </label>
            <input type="text" id="name" name="name" class="form-input" required>
        </div>

        <div class="div-inform">
             <label for="email"> Email: </label>
             <input type="email" id="email" name="email"
                    pattern=".+@gmail.com" size="30" class="form-input" required>
        </div>

        <div class="div-inform">
                <label for="phone"> Phone: </label>
                <input type="tel" id="phone" name="phone" class="form-input"
                       
                      required>
           </div>
      

       <div class="div-inform">
            <button onclick= "saveInputs()" type="submit" class="submit-button" > Submit</button>
       </div>
       
    </form>


<script>

function saveLocal () {

var theName = localStorage.getItem("names");

    if (theName) {

names = JSON.parse(localStorage.getItem("names"));
emails = JSON.parse(localStorage.getItem("emails"));
phones = JSON.parse(localStorage.getItem("phones"));

} else {

    names=[];
    emails=[];
    phones=[];

    localStorage.setItem("names", JSON.stringify(names));
    names = JSON.parse(localStorage.getItem("names"));
    
    localStorage.setItem("emails", JSON.stringify(emails));
    emails = JSON.parse(localStorage.getItem("emails"));
  
    localStorage.setItem("phones", JSON.stringify(phones));
    phones = JSON.parse(localStorage.getItem("phones"));
  
    }
    
   
    alert(name);
    alert(names);
  
    names.push(name);
    emails.push(email);
    phones.push(phone);
    

    localStorage.setItem('names', JSON.stringify(names));
    localStorage.setItem('emails', JSON.stringify(emails));
    localStorage.setItem('phones', JSON.stringify(phones));
   

    JSON.parse(localStorage.getItem('names'));
    JSON.parse(localStorage.getItem('emails'));
    JSON.parse(localStorage.getItem('phones'));
    

}

        function saveInputs () {

            if (typeof(Storage) !== "undefined") {
                // Store
                const name = document.getElementById("name").value;
                const email = document.getElementById("email").value;
                const phone = document.getElementById("phone").value;

                saveLocal();

                var phoneNum = document.getElementById("phone").value;
                var pLen = phoneNum.length;
                var firstPos = phoneNum.charAt(0); 
        
               // var pStr = document.getElementById("phone").value;

                if (pLen === 10 && firstPos !== "0" && firstPos !== "1") {
              
                  localStorage.setItem("name", name);
                  localStorage.setItem("email", email);
                  localStorage.setItem("phone", phone);
                  // Retrieve
                  document.getElementById("name").innerHTML = localStorage.getItem("name");
                  document.getElementById("email").innerHTML = localStorage.getItem("email");
                  document.getElementById("phone").innerHTML = localStorage.getItem("phone");
        
                  //setTimeout('window.location = "detailspage.html"',500);
        
                } else {
                  alert('Enter a 10 digit phone number, without symbols, not beginning with 1 or 0');
                }
        
            } else {
                document.getElementById("name").innerHTML = "Sorry, your browser does not support Web Storage...";
          }
        }


</script>
 


</body>
</html>


